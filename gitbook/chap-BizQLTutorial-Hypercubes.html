<!DOCTYPE HTML>
<html lang="en-US" manifest="../manifest.appcache">
    
    <head prefix="og: http://ogp.me/ns# book: http://ogp.me/ns/book#">
        
        
        <meta charset="UTF-8">
        <title>Hypercube Querying | XBRL Tutorial</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="robots" content="index, follow">
        <meta name="author" content="28msec">
        <meta name="description" content="Build Status">
        <meta name="keywords" content="gitbook,github" >
        <meta name="generator" content="www.gitbook.io">

        
        <link rel="next" href="../gitbook/chap-BizQLTutorial-ReportSchemas.html" />
        
        
        <link rel="prev" href="../gitbook/chap-BizQLTutorial-FactTables.html" />
        

        <meta property="og:title" content="Hypercube Querying | XBRL Tutorial">
        <meta property="og:site_name" content="XBRL Tutorial">
        <meta property="og:type" content="book">
        <meta property="og:locale" content="en_US">

        <meta property="book:author" content="https://github.com/28msec">
        <meta property="book:tag" content="GitBook">

        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">

        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
        
    </head>
    <body>
        
        

        <link rel="stylesheet" href="../gitbook/style.css">
        


        
    <div class="book" data-github="28msec/xbrl-tutorial" data-level="6" data-basepath=".." data-revision="1404580988447">
    <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    
    <a href="https://github.com/28msec/xbrl-tutorial" target="_blank" class="btn pull-left home-bookmark" aria-label="GitHub home"><i class="fa fa-bookmark-o"></i></a>
    
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    <span id="font-settings-wrapper">
        <a href="#" class="btn pull-left toggle-font-settings" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="btn-group btn-block">
        <button id="reduce-font-size" class="btn btn-default">A</button>
        <button id="enlarge-font-size" class="btn btn-default">A</button>
    </div>

    <ul class="list-group font-family-list">
        <li class="list-group-item" data-font="0">Serif</li>
        <li class="list-group-item" data-font="1">Sans</li>
    </ul>

    <div class="btn-group btn-group-xs btn-block color-theme-list">
        <button type="button" class="btn btn-default" id="color-theme-preview-0" data-theme="0">White</button>
        <button type="button" class="btn btn-default" id="color-theme-preview-1" data-theme="1">Sepia</button>
        <button type="button" class="btn btn-default" id="color-theme-preview-2" data-theme="2">Night</button>
    </div>
</div>

    </span>

    <!-- Actions Right -->
    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    

    
    <a href="https://github.com/28msec/xbrl-tutorial/stargazers" target="_blank" class="btn pull-right count-star hidden-xs"><i class="fa fa-star-o"></i> Star (<span>-</span>)</a>
    <a href="https://github.com/28msec/xbrl-tutorial/watchers" target="_blank" class="btn pull-right count-watch hidden-xs"><i class="fa fa-eye"></i> Watch (<span>-</span>)</a>
    

    <!-- Title -->
    <h1>
        <i class="fa fa-spinner fa-spin"></i>
        <a href="../" >XBRL Tutorial</a>
    </h1>
</div>

    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        <li>
            <a href="https://github.com/28msec" target="blank" class="author-link">About the author</a>
        </li>
        

        
        
        <li>
            <a href="https://github.com/28msec/xbrl-tutorial/issues" target="blank"class="issues-link">Questions and Issues</a>
        </li>
        

        
        
        <li>
            <a href="https://github.com/28msec/xbrl-tutorial/edit/master/gitbook/chap-BizQLTutorial-Hypercubes.md" target="blank" class="contribute-link">Edit and Contribute</a>
        </li>
        

        
        <li class="divider"></li>
        

        <li data-level="0" data-path="index.html">
            <a href="../"><i class="fa fa-check"></i> Introduction</a>
        </li>
        
    
        <li class="chapter " data-level="1" data-path="gitbook/chap-BizQLTutorial-Introduction.html">
            
            <a href="../gitbook/chap-BizQLTutorial-Introduction.html">
                <i class="fa fa-check"></i> <b>1.</b> Introduction
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="gitbook/chap-BizQLTutorial-Companies.html">
            
            <a href="../gitbook/chap-BizQLTutorial-Companies.html">
                <i class="fa fa-check"></i> <b>2.</b> Companies
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="gitbook/chap-BizQLTutorial-Filings.html">
            
            <a href="../gitbook/chap-BizQLTutorial-Filings.html">
                <i class="fa fa-check"></i> <b>3.</b> Filings
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="gitbook/chap-BizQLTutorial-Networks.html">
            
            <a href="../gitbook/chap-BizQLTutorial-Networks.html">
                <i class="fa fa-check"></i> <b>4.</b> Networks
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="5" data-path="gitbook/chap-BizQLTutorial-FactTables.html">
            
            <a href="../gitbook/chap-BizQLTutorial-FactTables.html">
                <i class="fa fa-check"></i> <b>5.</b> Fact tables
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="gitbook/chap-BizQLTutorial-Hypercubes.html">
            
            <a href="../gitbook/chap-BizQLTutorial-Hypercubes.html">
                <i class="fa fa-check"></i> <b>6.</b> Hypercube Querying
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="7" data-path="gitbook/chap-BizQLTutorial-ReportSchemas.html">
            
            <a href="../gitbook/chap-BizQLTutorial-ReportSchemas.html">
                <i class="fa fa-check"></i> <b>7.</b> Report schemas
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="gitbook/chap-BizQLTutorial-DesignYourOwnRESTAPI.html">
            
            <a href="../gitbook/chap-BizQLTutorial-DesignYourOwnRESTAPI.html">
                <i class="fa fa-check"></i> <b>8.</b> Design Your Own REST API
            </a>
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Generated using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="page-wrapper" tabindex="-1">
                <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 75%;min-width: 62.5%;"></div>
    </div>
    <div class="chapters">
    
        <a href="../index.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="../gitbook/chap-BizQLTutorial-Introduction.html" title="Introduction" class="chapter done new-chapter" data-progress="1" style="left: 12.5%;"></a>
    
        <a href="../gitbook/chap-BizQLTutorial-Companies.html" title="Companies" class="chapter done new-chapter" data-progress="2" style="left: 25%;"></a>
    
        <a href="../gitbook/chap-BizQLTutorial-Filings.html" title="Filings" class="chapter done new-chapter" data-progress="3" style="left: 37.5%;"></a>
    
        <a href="../gitbook/chap-BizQLTutorial-Networks.html" title="Networks" class="chapter done new-chapter" data-progress="4" style="left: 50%;"></a>
    
        <a href="../gitbook/chap-BizQLTutorial-FactTables.html" title="Fact tables" class="chapter done new-chapter" data-progress="5" style="left: 62.5%;"></a>
    
        <a href="../gitbook/chap-BizQLTutorial-Hypercubes.html" title="Hypercube Querying" class="chapter done new-chapter" data-progress="6" style="left: 75%;"></a>
    
        <a href="../gitbook/chap-BizQLTutorial-ReportSchemas.html" title="Report schemas" class="chapter  new-chapter" data-progress="7" style="left: 87.5%;"></a>
    
        <a href="../gitbook/chap-BizQLTutorial-DesignYourOwnRESTAPI.html" title="Design Your Own REST API" class="chapter  new-chapter" data-progress="8" style="left: 100%;"></a>
    
    </div>
</div>

                <div class="page-inner">
                
                    <section class="normal" id="section-gitbook_6">
                    
                        <h1 id="hypercube-querying">Hypercube Querying</h1>
<p>In the former section, we showed how to get the fact table associated with an SEC network. You may have seen at several place occurrences of the word &quot;Hypercube&quot;. The facts in an SEC network are actually organized in a hypercubic structure. We now go more into detais on this, and eventually show how you can build your own hypercubes and query for fact tables, outside of any SEC network.</p>
<h2 id="hypercubes">Hypercubes</h2>
<p>Concepts, entities, periods, units, as well as further dimensions are called <em>aspects</em> . It is possible to organize facts along <em>hypercubes</em> , the dimensions of which are these aspects. Usually, there will be either zero or one fact for each possible tuple of aspects. If there is more, it often indicates an inconsistency in the submission.</p>
<p>For example, if we stick to the USD unit, you can imagine a cube whose width represents concepts (Assets, Revenues), the height of which represents entities (Amex, Disney) and the depth of which represents periods (year 2012, year 2013, year 2014). This hypercube potentially contains 2 x 2 x 3 = 12 facts.</p>
<p>Note: From a practical perspective, it is disputed whether units are considered aspects, or whether they &quot;stick&quot; to the value.</p>
<h2 id="building-your-own-hypercube">Building your own hypercube</h2>
<p>The simplest hypercube you can imagine is made of four &quot;standard&quot; aspects: concept, entity, period and unit. It does not restrict the value of any of these aspects. It is called dimensionless, because in the XBRL universe, the four basic aspects are not considered XBRL dimensions.</p>
<p> Example - The dimensionless hypercube</p>
<pre><code class="lang-jsoniq">import module namespace hypercubes =
    &quot;http://xbrl.io/modules/bizql/hypercubes&quot;;

hypercubes:dimensionless-hypercube()
</code></pre>
<p>The result of this query shows you the object representation of a hypercube.</p>
<p> Example - The object format of hypercubes</p>
<pre><code class="lang-jsoniq">{
  &quot;Name&quot; : &quot;xbrl:DimensionlessHypercube&quot;, 
  &quot;Label&quot; : &quot;Dimensionless Hypercube&quot;, 
  &quot;Aspects&quot; : {
    &quot;xbrl:Concept&quot; : {
      &quot;Name&quot; : &quot;xbrl:Concept&quot;, 
      &quot;Label&quot; : &quot;Implicit XBRL Concept Dimension&quot;
    }, 
    &quot;xbrl:Period&quot; : {
      &quot;Name&quot; : &quot;xbrl:Period&quot;, 
      &quot;Label&quot; : &quot;Implicit XBRL Period Dimension&quot;
    }, 
    &quot;xbrl:Entity&quot; : {
      &quot;Name&quot; : &quot;xbrl:Entity&quot;, 
      &quot;Label&quot; : &quot;Implicit XBRL Entity Dimension&quot;
    }, 
    &quot;xbrl:Unit&quot; : {
      &quot;Name&quot; : &quot;xbrl:Unit&quot;, 
      &quot;Label&quot; : &quot;Implicit XBRL Unit Dimension&quot;, 
      &quot;Default&quot; : &quot;xbrl:NonNumeric&quot;
    }
  }
}
</code></pre>
<p>The facts in a hypercube can be queried with the function <code>sec:facts-for-hypercube</code> . There is a very high number of facts in this hypercube: all those without extra dimensions. Hundreds of thousands of them. Very often, when you query for facts against this dimensionless hypercube, you are asking for specifing archives. The function sec:facts-for-hypercube allows you to do so with its optional second parameter (the first being the hypercube).</p>
<p>Let&#39;s count all those facts that are in a given archive (here 1423).</p>
<p> Example - Retrieving the facts in the dimensionless hypercube for some filings</p>
<pre><code class="lang-jsoniq">import module namespace archives =
    &quot;http://xbrl.io/modules/bizql/archives&quot;;

import module namespace sec =
    &quot;http://xbrl.io/modules/bizql/profiles/sec/core&quot;;
import module namespace fiscal =
    &quot;http://xbrl.io/modules/bizql/profiles/sec/fiscal/core&quot;;

let $filing :=
  fiscal:filings-for-entities-and-fiscal-periods-and-years(
    (4962, 1001039),
    &quot;FY&quot;,
    (2011, 2012)
  )
let $hypercube := sec:user-defined-hypercube({
    &quot;sec:Archive&quot; : {
        Type: &quot;string&quot;,
        Domain: [ archives:aid($filing) ]
    }
})
return count(sec:facts-for-hypercube($hypercube))
</code></pre>
<p>Instead of looking at a single archive, you can look across archives, for concepts like <code>us-gaap:Assets</code> and <code>us-gaap:Equity</code> . In order to do so, you need to modify the dimensionless hypercube add filter on these two concepts. There are over 70k such facts.</p>
<pre><code class="lang-jsoniq">import module namespace sec =
    &quot;http://xbrl.io/modules/bizql/profiles/sec/core&quot;;

let $hypercube := sec:dimensionless-hypercube({
  Concepts: [ &quot;us-gaap:Assets&quot;, &quot;us-gaap:Equity&quot; ]
})
return count(sec:facts-for-hypercube($hypercube))
</code></pre>
<p>You can also build your own hypercube. To restrict a dimension, just add a field (One of <code>Concepts</code> , <code>Entities</code> , <code>Periods</code> , <code>Units</code> ) with an array of values. Below we show you how to make a restriction on DOW30 companies with just a small modification of the dimensionless hypercube function call.</p>
<pre><code class="lang-jsoniq">import module namespace sec =
    &quot;http://xbrl.io/modules/bizql/profiles/sec/core&quot;;
import module namespace companies =
    &quot;http://xbrl.io/modules/bizql/profiles/sec/companies&quot;;

let $hypercube := sec:dimensionless-hypercube({
  Concepts: [ &quot;us-gaap:Assets&quot;, &quot;us-gaap:Equity&quot; ],
  Entities: [ companies:companies-for-tags(&quot;DOW30&quot;)._id ]
})
return count(sec:facts-for-hypercube($hypercube))
</code></pre>
<p>If you begin to query across archives, and attempt to filter on periods, you will very soon notice that it is hard, because fiscal years differ from company to company. Technically, fiscal years and periods (FY, Q1, Q2, Q3) are not hypercube dimensions, but you can still filter for them using this Profiles.SEC.Fiscal part that annotates objects using the second parameter of <code>sec:facts-for-hypercube</code> . For example, here is how to get all assets and equities (no extra dimensions) for FY 2012 (6847 of them)</p>
<pre><code class="lang-jsoniq">import module namespace sec =
    &quot;http://xbrl.io/modules/bizql/profiles/sec/core&quot;;

let $hypercube := sec:user-defined-hypercube({
    &quot;xbrl:Concept&quot;: {
      Domain: [ &quot;us-gaap:Assets&quot;, &quot;us-gaap:Equity&quot; ]
    },
    &quot;sec:FiscalPeriod&quot; : {
        Type: &quot;string&quot;,
        Domain: [ &quot;FY&quot; ]
    },
    &quot;sec:FiscalYear&quot; : {
        Type: &quot;integer&quot;,
        Domain: [ 2012 ]
    }
}
)
return count(sec:facts-for-hypercube($hypercube))
</code></pre>
<p>What was done for the basic four dimensions (like xbrl:Equity) applies to extra dimensions as well. There is a more elaborate version of <code>hypercubes:dimensionless-hypercube</code> called <code>hypercubes:user-defined-hypercube</code> that allows you to add any number of dimensions, as well as restrict on them or add default values. Here you can ask for facts reported against the <code>us-gaap:DividendsCommonStock</code> concept, with a dimension <code>us-gaap:StatementEquityComponentsAxis</code> restricted on a value of <code>us-gaap:CommonStockMember</code> . There are 513 of them.</p>
<pre><code class="lang-jsoniq">import module namespace sec =
    &quot;http://xbrl.io/modules/bizql/profiles/sec/core&quot;;

let $hypercube := sec:user-defined-hypercube({
  &quot;xbrl:Concept&quot; : {
    Domain: [ &quot;us-gaap:DividendsCommonStock&quot; ]
  },
  &quot;us-gaap:StatementEquityComponentsAxis&quot; : {
    Domain: [ &quot;us-gaap:CommonStockMember&quot; ]
  }
})
return count(sec:facts-for-hypercube($hypercube))
</code></pre>
<p>Finally, you can combine extra dimensions, restricting several dimensions, filtering on fiscal years, etc. Let&#39;s ask for the companies that submitted, for FY 2011, a fact against the <code>us-gaap:DividendsCommonStock</code> concept, with a dimension <code>us-gaap:StatementEquityComponentsAxis</code> that has a value of <code>us-gaap:CommonStockMember</code> . There&#39;s only one and it&#39;s Walt Disney. And it takes less than one second to ask for this.</p>
<pre><code class="lang-jsoniq">import module namespace facts =
    &quot;http://xbrl.io/modules/bizql/facts&quot;;

import module namespace sec =
    &quot;http://xbrl.io/modules/bizql/profiles/sec/core&quot;;
import module namespace companies =
    &quot;http://xbrl.io/modules/bizql/profiles/sec/companies&quot;;

let $hypercube := sec:user-defined-hypercube({
  &quot;xbrl:Entity&quot; : {
    Type: &quot;string&quot;,
    Domain: [  companies:companies-for-tags(&quot;DOW30&quot;)._id ]
  }, 
  &quot;us-gaap:StatementEquityComponentsAxis&quot; : {
    Domain: [ &quot;us-gaap:CommonStockMember&quot; ]
  },
  &quot;sec:FiscalPeriod&quot; : {
    Type: &quot;string&quot;,
    Domain: [ &quot;FY&quot; ]
  },
  &quot;sec:FiscalYear&quot; : {
    Type: &quot;integer&quot;,
    Domain: [ 2012 ]
  }
})
let $fact := sec:facts-for-hypercube($hypercube)
return companies:companies($fact ! facts:entity-for-fact($$))
    .Profiles.SEC.CompanyName
</code></pre>
<p>The SEC modules provide many functions that just wrap these queries in nicer code, and there are more to come. The documentation is there for you to find them.</p>
<h2 id="the-secxbrl-info-rest-api-for-user-defined-hypercubes">The SECXBRL.info REST API for user-defined hypercubes</h2>
<p>We also provide a REST API that allows you to build your hypercubes and ask for fact tables and, say, import them into an Excel spreadsheet. The API is documentedhere</p>
<h3 id="build-your-hypercube-with-the-rest-api">Build your hypercube with the REST API</h3>
<p>You can build your own hypercube by using dimension names as fields in the query string, along with one or several values. For example, &quot;xbrl:Concept=us-gaap:Goodwill&quot; will filter for concepts named us-gaap:Goodwill.</p>
<p>For the entity dimension, for convenience, you can use the same parameters as in the companies API: cik, ticker, tag, etc -- instead of &quot;xbrl:Entity&quot;.</p>
<p>For the concept dimension, use the more convenient &quot;concept&quot; parameter name. For example: <a href="http://secxbrl.xbrl.io/api/facts.jq?concept=us-gaap:Goodwill&amp;cik=4962" target="_blank">http://secxbrl.xbrl.io/api/facts.jq?concept=us-gaap:Goodwill&amp;cik=4962</a></p>
<p>For requiring a dimension, without restriction, use a value of &quot;ALL&quot;. For example: <a href="http://secxbrl.xbrl.io/api/facts.jq?concept=us-gaap:DividendsCommonStock&amp;tag=DOW30&amp;us-gaap:StatementEquityComponentsAxis=ALL" target="_blank">http://secxbrl.xbrl.io/api/facts.jq?concept=us-gaap:DividendsCommonStock&amp;tag=DOW30&amp;us-gaap:StatementEquityComponentsAxis=ALL</a></p>
<p>You can specify a default dimension value using &quot;dimensionname:default&quot;, like so: <a href="http://secxbrl.xbrl.io/api/facts.jq?concept=us-gaap:DividendsCommonStock&amp;tag=DOW30&amp;us-gaap:StatementEquityComponentsAxis=ALL&amp;us-gaap:StatementEquityComponentsAxis:default=sec:myDefault" target="_blank">http://secxbrl.xbrl.io/api/facts.jq?concept=us-gaap:DividendsCommonStock&amp;tag=DOW30&amp;us-gaap:StatementEquityComponentsAxis=ALL&amp;us-gaap:StatementEquityComponentsAxis:default=sec:myDefault</a></p>
<p>The last query in the former section corresponds to <a href="http://secxbrl.xbrl.io/api/facts.jq?concept=us-gaap:DividendsCommonStock&amp;tag=DOW30&amp;us-gaap:StatementEquityComponentsAxis=us-gaap:CommonStockMember&amp;fiscalYear=2012&amp;fiscalPeriod=FY" target="_blank">http://secxbrl.xbrl.io/api/facts.jq?concept=us-gaap:DividendsCommonStock&amp;tag=DOW30&amp;us-gaap:StatementEquityComponentsAxis=us-gaap:CommonStockMember&amp;fiscalYear=2012&amp;fiscalPeriod=FY</a></p>

                    
                    </section>
                
                </div>
            </div>
        </div>

        
        <a href="../gitbook/chap-BizQLTutorial-FactTables.html" class="navigation navigation-prev " aria-label="Previous page: Fact tables"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../gitbook/chap-BizQLTutorial-ReportSchemas.html" class="navigation navigation-next " aria-label="Next page: Report schemas"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        

        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/mode-javascript.js"></script>
        <script src="../gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
        <script src="../gitbook/app.js"></script>
        

    
    <script src="../gitbook/plugins/gitbook-plugin-mixpanel/plugin.js"></script>
    

    
    <script src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
