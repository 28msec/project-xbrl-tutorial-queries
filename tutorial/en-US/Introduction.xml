<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "BizQLTutorial.ent">
%BOOK_ENTITIES;
]>
<chapter id="chap-BizQLTutorial-Introduction">
	<title>Introduction</title>
  <para>Just a few years ago, most companies were generating internal or external reports using text processors and spreadsheets.
This was extremely inefficient and expensive: Excel and Word files were flowing from mailbox to mailbox, information was rekeyed
on the fly, copied over, reorganized manually. In addition to the amount of time spent on these processes, this was very error-prone.
For a few years now, the XBRL standard has been gaining importance, allowing
reports to be made in a unified format. Some regulating authorities such as the SEC even made it mandatory.</para>

  <para>In business life, standardization matters more than perfection. While XBRL is not perfect, it is now a standard,
and it does a fine job doing what it was designed for.</para>

  <para>While this is a cost-sinking revolution, it is also a revolution about access to information: using latest database technologies,
XBRL reports can be made <emphasis>queryable</emphasis>. In particular, it is possible to <emphasis>validate</emphasis> that the reports
do not contain a certain number of errors, to <emphasis>impute</emphasis> non-submitted information, but also to <emphasis>derive</emphasis>
new information using data at an unprecedented scale (across potentially all XBRL reports in the world, and much beyond).</para>

  <section>
    <title>NoSQL technologies</title>
    <para>Many XBRL services providers store XBRL data in a relational database. However, very soon, the limits of homogeneous, flat tables are reached
and slow down requests. Other services leverage the fact that the XBRL syntax is based on XML and store it, as is, in an XML database.
Yet the raw XBRL format is not suitable for querying, or at least, for querying with reasonable performance: while XBRL
uses the XML syntax, its data model is significantly different from that of XML, in at least the two following ways. If you leave tuples aside, there is nothing flatter than a physical fact.
Networks that have no directed cycles (i.e., directed acyclic graphs, often even trees) can be stored in more optimal ways than raw XLink.</para>

<para>With NoSQL technologies, XBRL can be stored in an way that is optimized for hypercube querying (we called it NOLAP). NOLAP
extends the OLAP paradigm by removing hypercube rigidity and letting users generate their own hypercubes on the fly on the same pool of (fact) values. Very much
like NoSQL technologies extend the SQL paradigm by replacing flat, homogeneous tables with heterogeneous, arborescent data.</para>
  </section>

  <section>
    <title>The JSONiq language</title>
    <para>JSONiq is the language used by 28msec's flagship platform, 28.io.
      It is a NoSQL query language that deals with heterogeneous, arborescent data. It extends JSONiq with a number of
      modules that make it convenient to access, simultaneously, many data sources (MongoDB databases, traditional relational databases, S3 storage on Amazon, Graph Databases,
      Cloudant and many more) and combine them seamlessly to extract information.
      This tutorial assumes that the user is, or will make himself, familiar with JSONiq. A JSONiq tutorial as well as a complete reference
      can be found on <uri>http://www.jsoniq.org/</uri>. JSONiq queries can be executed for free on the 28.io platform.</para>
  </section>
  <section>
    <title>The xbrl.io data sources</title>
    <para>xbrl.io provides new data sources (SEC for various subsets of companies, FINREP, etc)
    available on the 28.io platform. It semantically exposes to the user
    the XBRL data stored in a NoSQL database (currently MongoDB), leveraging
    the NOLAP paradigm. Access to the data is done through the XBRL connector, which consists of JSONiq modules.</para>
    <para>Documentation about these modules can be found at <uri>http://www.28.io/documentation/latest/modules/bizql</uri>.</para>
  </section>
  <section>
    <title>How to run the queries</title>
    <para>All queries shown in this tutorial can be run on our platform. You can register and use our platform
      for free, for a basic usage and limited to DOW30. Access to all 10-Q and 10-K filings (several thousands of companies over the last 3-4 years)
      is possible for a fee.</para>
    <para>The following instructions should help you get started.</para>
    <orderedlist>
      <listitem>
        <para>Go to the xbrl.io Web site, <uri>http://xbrl.io/</uri></para>
        <para><inlinegraphic scalefit="1" width="100%" contentdepth="100%" fileref="images/1homepage.png"/></para>
      </listitem>
      <listitem>
        <para>Click on Signup.</para>
        <para><inlinegraphic scalefit="1" width="100%" contentdepth="100%" fileref="images/2signup.png"/></para>
      </listitem>
      <listitem>
        <para>Enter your information as well as desired credentials, and confirm.</para>
        <para><inlinegraphic scalefit="1" width="100%" contentdepth="100%" fileref="images/3email.png"/></para>
      </listitem>
      <listitem>
        <para>Check your e-mail (including spam folder) and validate your e-mail address.</para>
        <para><inlinegraphic scalefit="1" width="100%" contentdepth="100%" fileref="images/4signin.png"/></para>
      </listitem>
      <listitem>
        <para>Login using your chosen credentials.</para>
        <para><inlinegraphic scalefit="1" width="100%" contentdepth="100%" fileref="images/5projects.png"/></para>
      </listitem>
      <listitem>
        <para>Click on <code>+New</code> to create a new project.</para>
        <para><inlinegraphic scalefit="1" width="100%" contentdepth="100%" fileref="images/6newproject.png"/></para>
      </listitem>
      <listitem>
        <para>You now have a project, which got prepopulated with sample queries.</para>
        <para><inlinegraphic scalefit="1" width="100%" contentdepth="100%" fileref="images/7databrowser.png"/></para>
        <para><inlinegraphic scalefit="1" width="100%" contentdepth="100%" fileref="images/8newpublicquery.png"/></para>
      </listitem>
      <listitem>
        <para>Click on +, next to Queries, and on "Public Query"</para>
        <para><inlinegraphic scalefit="1" width="100%" contentdepth="100%" fileref="images/9queryname.png"/></para>
      </listitem>
      <listitem>
        <para>Pick a query name, ending with .jq (for JSONiq).</para>
        <para><inlinegraphic scalefit="1" width="100%" contentdepth="100%" fileref="images/10execute.png"/></para>
      </listitem>
      <listitem>
        <para>Type your query, and click on the white triangle on a green background to execute it.</para>
      </listitem>
    </orderedlist>
  </section>
  <section>
    <title>The queries in this tutorial</title>
    <para>All queries shown in this tutorial are available as an xbrl.io project on <uri>https://github.com/28msec/project-xbrl-tutorial-queries</uri>.
      After you checked out the project, you can use the 28 command line program (available at <uri>https://github.com/28msec/28</uri>)
      to upload the queries to your xbrl.io project:</para>
<programlisting>
cd /home/science-officer/enterprise/starfleet-exchange-commission
28 login spock@starfleet.example.com
28 upload my-project-on-xbrl-io --overwrite yes -d
</programlisting>
  </section>
  <section>
  <title>Organization of the tutorial</title>
    <para>XBRL is about submitting <emphasis>facts</emphasis>. Facts are reported by companies, which are introduced
      in <xref linkend="chap-BizQLTutorial-Companies"/>.</para>
    <para>In real life though, facts are not reported one by one, but are submitted to an authority like
      the SEC in <emphasis role="bold">archives</emphasis>. A bit like you don't buy pop corn one
      chunk at a time, but in a pop corn package.</para>
    <para>A filing is made of facts, but also contains metainformation on these facts. This
      metainformation is called taxonomy in the XBRL world, while the factual part is called an XBRL
      instance. It contains, from an abstract perspective (we don't go into the low-level details of
      networks, etc):<itemizedlist>
        <listitem>
          <para>Concept declarations: this is a description of the terminology used by the
            facts.</para>
        </listitem>
        <listitem>
          <para>User-friendly labels for the concepts, which can be used for fancy front-ends and
            editors, as well as human-readable documentation on the concepts.</para>
        </listitem>
        <listitem>
          <para>Hypercube declarations, and their dimensions (dimensions also have fancy labels,
            etc).</para>
        </listitem>
        <listitem>
          <para>Structures, like hierarchies of concepts that can be used on a fancy front-end as
            well to nicely display the facts.</para>
        </listitem>
        <listitem>
          <para>Formulas, that can be used to either validate the reported facts (example: the
            assets match the equities and liabilities) or to compute new, non reported facts.</para>
        </listitem>
      </itemizedlist></para>
    <para>Filings are explained in <xref linkend="chap-BizQLTutorial-Filings"/>.</para>
    <para>Typically, a filing is reported by a single company, called the reporting entity, and all
      facts are attached to it.</para>
    <para>A filing is typically subdivided in networks. A network is just a subset of an
      archive that "makes sense", like a balanced sheet, or metadata on the report, or an income
      statement. Networks are explained in <xref linkend="chap-BizQLTutorial-Networks"/>.</para>
    <para>Just like elephants live in herds, whey they are wild, facts usually live in tables.
For each network, a fact table can be obtained as shown in <xref linkend="chap-BizQLTutorial-FactTables"/>.</para>
    <para>A hypercube provides a very convenient way to query for facts: give me a hypercube, and I
      can give you the facts that belong to it.</para>
    <para>The hypercube can be directly taken from an archive (like a balanced sheet statement
      table). But it can also be generated ad hoc, which covers even more ground: ad hoc hypercubes allow
      the organization of facts across multiple entities, and across multiple archives, that is,
      across multiple reporting periods. This is shown in <xref linkend="chap-BizQLTutorial-Hypercubes"/>.</para>
    <para>Ad hoc hypercubes are typically integrated in report schemas. A report schema can provide,
      in addition to a hypercube, concept maps and business rules. We will come back on this
      later.</para>
  </section></chapter>
